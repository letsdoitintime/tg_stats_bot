# Telegram Bot Configuration
BOT_TOKEN=your_bot_token_here

# Database Configuration
# Format: postgresql+psycopg://username:password@host:port/database_name
DATABASE_URL=postgresql+psycopg://tgstats_user:your_secure_password_here@localhost:5432/tgstats

# Bot Mode (polling or webhook)
MODE=polling

# Webhook URL (only needed if MODE=webhook)
WEBHOOK_URL=

# Logging Level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Logging configuration for third-party libraries
TELEGRAM_LOG_LEVEL=WARNING
HTTPX_LOG_LEVEL=WARNING
UVICORN_LOG_LEVEL=INFO

# Log file settings
LOG_TO_FILE=true                          # Enable/disable file logging
LOG_FILE_PATH=logs/tgstats.log            # Path to log file
LOG_FILE_MAX_BYTES=10485760               # Max size per log file (10MB default)
LOG_FILE_BACKUP_COUNT=5                   # Number of backup files to keep
LOG_FORMAT=text                           # Log format: 'text' (colored) or 'json'

# Step 2 additions - Redis Configuration (for background tasks)
REDIS_URL=redis://localhost:6379/0

# Admin API Token (for Step 2 API access - change this!)
ADMIN_API_TOKEN=your_secret_admin_token_here

# Optional: Custom timezone (defaults to UTC)
# TIMEZONE=Europe/Kiev

# Optional: Custom locale (defaults to en)
# LOCALE=uk

# Performance settings
ENABLE_CACHE=true
CACHE_TTL=300

# Security settings - Rate limiting
RATE_LIMIT_PER_MINUTE=10
RATE_LIMIT_PER_HOUR=100

# CORS Configuration (comma-separated list of allowed origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# Request limits
MAX_REQUEST_SIZE=1048576  # 1MB default

# Database Connection Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=1.0

# Bot Connection Settings
# Standard bot operations (sendMessage, etc.)
BOT_CONNECTION_POOL_SIZE=8
BOT_READ_TIMEOUT=40.0          # Should be > 30s for general operations
BOT_WRITE_TIMEOUT=15.0
BOT_CONNECT_TIMEOUT=15.0
BOT_POOL_TIMEOUT=15.0

# Bot Polling Settings (for get_updates)
# CRITICAL: get_updates_read_timeout MUST be > bot_get_updates_timeout + 10s buffer
# to prevent timeout errors during long-polling
BOT_GET_UPDATES_READ_TIMEOUT=50.0      # Telegram waits up to 30s + 20s buffer
BOT_GET_UPDATES_CONNECT_TIMEOUT=20.0   # Higher for initial connection
BOT_GET_UPDATES_POOL_TIMEOUT=20.0      # Higher pool timeout for long-polling
BOT_GET_UPDATES_TIMEOUT=30             # Telegram's long-polling timeout (seconds)
BOT_POLL_INTERVAL=0.0                  # Delay between get_updates calls (0 = no delay)
BOT_BOOTSTRAP_RETRIES=-1               # Retry forever on startup (-1 recommended for production)

# Celery Task Settings
CELERY_TASK_MAX_RETRIES=3
CELERY_TASK_RETRY_DELAY=60

# Monitoring
ENABLE_METRICS=true
ENVIRONMENT=production

# Optional: Sentry DSN for error tracking
# SENTRY_DSN=
